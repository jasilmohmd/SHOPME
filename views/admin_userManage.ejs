<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<!-- My CSS -->
	<link rel="stylesheet" href="/css/admin_dash.css">
	<link rel="stylesheet" href="/css/productManage.css">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">

	<title>AdminHub</title>
</head>

<body>


	<!-- SIDEBAR -->
	<%- include("include/_admin_sidebar") %>
		<!-- SIDEBAR -->



		<!-- CONTENT -->
		<section id="content">
			<!-- NAVBAR -->
			<nav>

				<a href="#" class="notification">
					<i class='bx bxs-bell'></i>
					<span class="num">8</span>
				</a>
				<a href="#" class="profile">
					<img src="img/people.png">
				</a>
			</nav>
			<!-- NAVBAR -->

			<!-- MAIN -->
			<main>
				<div class="head-title">
					<div class="left">
						<h1>User Management</h1>
					</div>

				</div>

				<div class="container">
					<div class="container-head">

					</div>
					<div class="container-body">
						<% for(let i=0 ; i<user.length ; i++){ %>

							<div class="product-box">
								<div class="product">
									<% if(user[i].image==null){ %>
										<img class="user-img" src="/img/default_profile.jpg">
										<% }else { %>
											<img class="user-img" src="<%= user[i].image %>">
											<% } %>
												<div class="main-details">
													<p><span>
															<%= user[i].name %>
														</span></p>
													<p>email: <%= user[i].email %>
													</p>
													<p>phone: <%= user[i].phone %>
													</p>
												</div>
								</div>

								<div class="end-sec">
									<% if(user[i].status==="Active" ){ %>
										<p class="active">Active</p>
										<% } else { %>
											<p class="inactive">Inactive</p>
											<% } %>
												<div class="interactions">

													<% if(user[i].isBlocked==false){ %>

														<button class="butn" data-bs-toggle="modal"
														data-bs-target="#staticBackdrop1<%= i %>">Block</button>

														<!-- Block Prompt -->

														<!-- Modal -->
														<div class="modal modal-sm fade" id="staticBackdrop1<%= i %>" data-bs-backdrop="static"
															data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
															aria-hidden="true">
															<div class="modal-dialog modal-dialog-centered">
																<div class="modal-content">
																	<div class="modal-header">
																		<h1 class="modal-title fs-5" id="staticBackdropLabel">Block User</h1>
																	</div>
																	<div class="modal-body">
																		Press Yes to confirm.
																	</div>
																	<div class="modal-footer">

																		<a href="/admin/api/users/block?id=<%= user[i]._id %>">

																			<button class="modalbtn" style="background-color: rgb(144, 14, 14);" type="button"
																				class="btn btn-primary">Yes</button>

																		</a>

																		<button class="modalbtn" type="button" class="btn btn-secondary"
																			data-bs-dismiss="modal">No</button>

																	</div>
																</div>
															</div>
														</div>
														<!-- Block Prompt -->
														<% }else { %>

															<button class="butn blocked" data-bs-toggle="modal"
																data-bs-target="#staticBackdrop2<%= i %>">Unblock</button>

															<!-- Unblock Prompt -->

															<!-- Modal -->
															<div class="modal modal-sm fade" id="staticBackdrop2<%= i %>" data-bs-backdrop="static"
																data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
																aria-hidden="true">
																<div class="modal-dialog modal-dialog-centered">
																	<div class="modal-content">
																		<div class="modal-header">
																			<h1 class="modal-title fs-5" id="staticBackdropLabel">Unblock User</h1>
																		</div>
																		<div class="modal-body">
																			Press Yes to confirm.
																		</div>
																		<div class="modal-footer">

																			<a href="/admin/api/users/unblock?id=<%= user[i]._id %>">

																				<button class="modalbtn" style="background-color: rgb(144, 14, 14);"
																					type="button" class="btn btn-primary">Yes</button>

																			</a>

																			<button class="modalbtn" type="button" class="btn btn-secondary"
																				data-bs-dismiss="modal">No</button>

																		</div>
																	</div>
																</div>
															</div>
															<!-- Unblock Prompt -->
															<% } %>
												</div>
								</div>
							</div>

							<% } %>
					</div>
				</div>

			</main>
			<!-- MAIN -->

		</section>
		<!-- CONTENT -->


		<script src="js/admin_css.js"></script>
</body>

</html>